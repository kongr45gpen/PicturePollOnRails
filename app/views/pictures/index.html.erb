<% 
  if @author 
    provide(:title, "Pictures by #{@author.name}")
  else
    provide(:title, "Pictures")
  end
%>

<h1>Listing pictures</h1>

<table>
    <tr>
        <th>Name</th>
        <th>Author</th>
        <th>Preview</th>
        <th colspan="3"></th>
    </tr>

    <% @pictures.each do |picture| %>
        <tr>
            <td><%= picture.name %></td>
            <td><%= link_to picture.author.name, author_path(picture.author) %></td>
            <td><img src="<%= picture.filename %>" style="height:100px;"></td>
            <td><%= link_to 'Show', picture_path(picture) %></td>
            <td><%= link_to 'Edit', edit_picture_path(picture) %></td>
            <td><%= link_to 'Destroy', picture_path(picture),
                                       method: :delete,
                                       data: { confirm: 'Are you sure?' } %>
            </td>
        </tr>
    <% end %>
</table>

<p><%= link_to 'Home', root_path %>
<% if @author %>
| <%= link_to 'Author', author_path(@author) %>
<% end %>
| <%= link_to 'New picture', new_picture_path%>
</p>
